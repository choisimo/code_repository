# 자식 프로세스에서 fork() 호출 시 PID와 프로세스 구조

질문에 약간의 오해가 있습니다. 자식 프로세스의 PID는 0이 아닙니다. 모든 프로세스는 커널에 의해 할당된 고유한 양수값 PID를 가집니다. 혼동이 발생한 부분은 `fork()` 시스템 콜의 **반환값**에 관한 것입니다.

## fork() 반환값과 PID의 차이점

`fork()`가 호출되면:

1. 부모 프로세스에서는: 자식 프로세스의 실제 PID가 반환됨 (양수)
2. 자식 프로세스에서는: 0이 반환됨

이 반환값 0은 자식 프로세스의 PID가 아니라, 단지 코드 내에서 부모 프로세스와 자식 프로세스를 구분하기 위한 식별자입니다. 자식 프로세스는 `getpid()` 시스템 콜을 호출하여 자신의 실제 PID를 얻을 수 있습니다.

## 손자 프로세스 생성 시 PID 구조

자식 프로세스가 fork()를 호출하여 손자 프로세스를 생성할 때:

1. 자식 프로세스(이제는 부모 역할)에서는 fork()가 손자 프로세스의 실제 PID를 반환합니다
2. 손자 프로세스에서는 fork()가 0을 반환합니다
3. 손자 프로세스는 getpid()로 자신의 실제 PID를 확인할 수 있습니다
4. 손자 프로세스는 getppid()로 자신의 부모(자식 프로세스)의 PID를 확인할 수 있습니다[1]

## 프로세스 트리 예시

실제 PID를 확인해보면 다음과 같은 구조가 됩니다:

```
원래 부모 프로세스: PID 5000 (예시)
  └── 자식 프로세스: PID 5001 (예시)
       └── 손자 프로세스: PID 5002 (예시)
```

각 fork() 호출 내부에서의 반환값:
- 부모에서의 첫 번째 fork(): 5001 반환
- 자식에서는 첫 번째 fork(): 0 반환
- 자식이 호출한 두 번째 fork(): 5002 반환
- 손자에서는 두 번째 fork(): 0 반환

## 요약

- 모든 프로세스는 커널에 의해 할당된 고유한 양수 PID를 가집니다
- fork()의 반환값 0은 실제 PID가 아니라 단지 "당신은 새로 생성된 자식입니다"를 의미하는 표시입니다
- 자식 프로세스가 fork()를 호출하면, 동일한 메커니즘이 반복되어 손자 프로세스가 생성됩니다
- 각 프로세스는 getpid()로 자신의 PID를, getppid()로 부모의 PID를 알 수 있습니다

이 구조는 프로세스 트리가 얼마나 깊어지든 동일하게 적용됩니다.
